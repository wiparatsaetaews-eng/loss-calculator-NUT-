<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>คำนวณการสูญเสีย Bulk</title>
<p>Yield (%): <b id="yield">-</b></p>
<p>สถานะ: <b id="status">-</b></p>

<style>
body {
  font-family: Arial;
  max-width: 420px;
  margin: auto;
  padding: 20px;  
</style>
}

input, select, button {
  width: 100%;
  padding: 8px;
  margin-top: 6px;
}
  
.result {
  background: #f2f2f2;
  padding: 12px;
  margin-top: 12px;
}

.pass { color: green; font-weight: bold; }
.warn { color: orange; font-weight: bold; }
.fail { color: red; font-weight: bold; }

</style>
</head>

<body>

<h2>คำนวณการสูญเสีย Bulk</h2>

<label>หน่วยน้ำหนัก Bulk</label>
<select id="bulkUnit">
  <option value="1000">kg</option>
  <option value="1">g</option>
  <option value="0.001">mg</option>
</select>

<label>น้ำหนัก Bulk ทั้งหมด</label>
<input id="bulkWeight" type="number" step="0.0001">

<label>หน่วยน้ำหนักต่อซอง/แคปซูล</label>
<select id="packUnit">
  <option value="1000">kg</option>
  <option value="1">g</option>
  <option value="0.001">mg</option>
</select>

<label>น้ำหนักต่อซอง/แคปซูล</label>
<input id="packWeight" type="number" step="0.0001">

<label>จำนวนซอง/แคปซูลจริง (A)</label>
<input id="actual" type="number">

<button onclick="calc()">คำนวณ</button>

<div class="result">
  <p>จำนวนซอง/แคปซูลทฤษฎี (B): <b id="theory">-</b></p>
  <p>ความต่าง (B − A): <b id="diff">-</b></p>
  <p>% การสูญเสีย Bulk: <b id="loss">-</b></p>
</div>

<script>
function calculate() {
  const bulk = parseFloat(document.getElementById("bulk").value);
  const pack = parseFloat(document.getElementById("pack").value);
  const actual = parseFloat(document.getElementById("actual").value);

  const theoretical = bulk / pack;
  const loss = ((theoretical - actual) / theoretical) * 100;

  const box = document.getElementById("resultBox");
  box.className = "result";

  let status = "";
  if (loss < 0.5) {
    box.classList.add("pass");
    status = "ผ่าน";
  } else if (loss < 1) {
    box.classList.add("warn");
    status = "เฝ้าระวัง";
  } else {
    box.classList.add("fail");
    status = "ไม่ผ่าน";
  }

  box.innerHTML = `
    <b>Yield Loss</b><br>
    จำนวนซองทฤษฎี (B): ${theoretical.toFixed(0)}<br>
    จำนวนซอง/แคปซูลจริง (A): ${actual}<br>
    % Loss: ${loss.toFixed(2)}%<br>
    สถานะ: ${status}
  `;
}
</script>

</body>
</html>
