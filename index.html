<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>Yield Calculator</title>

<style>
body {
  font-family: Arial;
  max-width: 480px;
  margin: auto;
  padding: 20px;
}

input, select, button {
  width: 100%;
  padding: 8px;
  margin-top: 6px;
}

button {
  margin-top: 12px;
}

.result {
  padding: 14px;
  margin-top: 16px;
  border-radius: 6px;
}

.pass { background: #c8f7c5; }
.warn { background: #fff3b0; }
.fail { background: #f7c5c5; }
</style>
</head>

<body>

<h2>Yield Calculator</h2>

<label>หน่วยน้ำหนัก Bulk</label>
<select id="bulkUnit">
  <option value="1000">kg</option>
  <option value="1">g</option>
  <option value="0.001">mg</option>
</select>

<label>น้ำหนัก Bulk ทั้งหมด</label>
<input id="bulkWeight" type="number" step="0.0001">

<label>หน่วยน้ำหนักต่อซอง / แคปซูล</label>
<select id="packUnit">
  <option value="1000">kg</option>
  <option value="1">g</option>
  <option value="0.001">mg</option>
</select>

<label>น้ำหนักต่อซอง / แคปซูล</label>
<input id="packWeight" type="number" step="0.0001">

<label>จำนวนซอง / แคปซูล(ยอดของดี) (A)</label>
<input id="actualQty" type="number">

<button onclick="calculate()">คำนวณ</button>

<div id="resultBox" class="result">
  <p>จำนวนตามทฤษฎี (B): <b id="theory">-</b></p>
  <p>ความต่าง (B − A): <b id="diff">-</b></p>
  <p>Yield (%): <b id="yield">-</b></p>
  <p>% การสูญเสีย Bulk (Loss%): <b id="loss">-</b></p>
  <p>สถานะ: <b id="status">-</b></p>
</div>

<script>
function calculate() {

  const bulkUnit = Number(document.getElementById("bulkUnit").value);
  const packUnit = Number(document.getElementById("packUnit").value);

  const bulkWeight = Number(document.getElementById("bulkWeight").value) * bulkUnit;
  const packWeight = Number(document.getElementById("packWeight").value) * packUnit;
  const actual = Number(document.getElementById("actualQty").value);

  if (bulkWeight <= 0 || packWeight <= 0 || actual <= 0) {
    alert("กรุณากรอกข้อมูลให้ครบ");
    return;
  }

  // จำนวนตามทฤษฎี
  const theory = bulkWeight / packWeight;

  // ความต่าง
  const diff = theory - actual;

  // Yield & Loss
  const yieldPercent = (actual / theory) * 100;
  const lossPercent = 100 - yieldPercent;

  // แสดงผล
  document.getElementById("theory").innerText = theory.toFixed(0);
  document.getElementById("diff").innerText = diff.toFixed(0);
  document.getElementById("yield").innerText = yieldPercent.toFixed(2) + " %";
  document.getElementById("loss").innerText = lossPercent.toFixed(2) + " %";

  const box = document.getElementById("resultBox");
  const status = document.getElementById("status");

  box.className = "result";

  if (lossPercent < 3) {
    box.classList.add("pass");
    status.innerText = "ผ่าน";
  } else if (lossPercent < 5) {
    box.classList.add("warn");
    status.innerText = "เฝ้าระวัง";
  } else {
    box.classList.add("fail");
    status.innerText = "ไม่ผ่าน";
  }
}
</script>

</body>
</html>
